#define LED_MATRIX
#include <LedControl.h>

#define MEGA TRUE  // Using the Mega2560 board

#define TRUE 1
#define FALSE 0

#define THOUSANDS 3
#define HUNDREDS 2
#define TENS 1
#define UNITS 0

#define MAX_ROWS 7     // 8  // Row 8 is not used so skipped for performance
#define MAX_COLUMNS 7  // 8  // Column 8 is not used so skipped for performance

#define MAX_DEVICES 4

#ifdef UNO  // Define pins for the Arduino UNO board
#define CS_PIN 10
#define CLK_PIN 13
#define DIN_PIN 11
#endif
#ifdef MEGA
#define CS_PIN 47
#define DIN_PIN 46
#define CLK_PIN 9
#endif

LedControl lc = LedControl(DIN_PIN, CLK_PIN, CS_PIN, MAX_DEVICES);

int _oldNumber = -1;
int _oldThousands = -1;
int _oldHundreds = -1;
int _oldTens = -1;
int _oldUnits = -1;

byte _displayPixels[11][8][8] = {
  { { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 1, 1, 1, 1, 1, 0, 0 },
    { 1, 0, 0, 0, 0, 0, 1, 0 },  // ZERO
    { 1, 0, 0, 0, 0, 0, 1, 0 },
    { 1, 0, 0, 0, 0, 0, 1, 0 },
    { 0, 1, 1, 1, 1, 1, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 } },

  { { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 1, 1, 1, 1, 1, 1, 1, 0 },  // ONE
    { 1, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 1, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 } },

  { { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 1, 1, 0, 0, 0, 1, 0 },
    { 1, 0, 0, 1, 0, 0, 1, 0 },  // TWO
    { 1, 0, 0, 1, 0, 0, 1, 0 },
    { 1, 0, 0, 0, 1, 0, 1, 0 },
    { 0, 1, 0, 0, 0, 1, 1, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 } },

  { { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 1, 1, 0, 1, 1, 0, 0 },  // THREE
    { 1, 0, 0, 1, 0, 0, 1, 0 },
    { 1, 0, 0, 1, 0, 0, 1, 0 },
    { 1, 0, 0, 0, 0, 0, 1, 0 },
    { 0, 1, 0, 0, 0, 1, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 } },

  { { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 1, 1, 1, 1, 1, 1, 1, 0 },
    { 0, 0, 0, 1, 0, 0, 0, 0 },  // FOUR
    { 0, 0, 0, 1, 0, 0, 0, 0 },
    { 0, 0, 0, 1, 0, 0, 0, 0 },
    { 1, 1, 1, 1, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 } },

  { { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 1, 0, 0, 0, 1, 1, 0, 0 },
    { 1, 0, 0, 1, 0, 0, 1, 0 },  // FIVE
    { 1, 0, 0, 1, 0, 0, 1, 0 },
    { 1, 0, 0, 1, 0, 0, 1, 0 },
    { 1, 1, 1, 1, 0, 0, 1, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 } },

  { { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 1, 1, 0, 0 },
    { 1, 0, 0, 1, 0, 0, 1, 0 },  // SIX
    { 1, 0, 0, 1, 0, 0, 1, 0 },
    { 1, 0, 0, 1, 0, 0, 1, 0 },
    { 0, 1, 1, 1, 1, 1, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 } },

  { { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 1, 1, 0, 0, 0, 0, 0 },
    { 1, 0, 0, 1, 1, 0, 0, 0 },  // SEVEN
    { 1, 0, 0, 0, 0, 1, 1, 0 },
    { 1, 0, 0, 0, 0, 0, 0, 0 },
    { 1, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 } },

  { { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 1, 1, 0, 1, 1, 0, 0 },
    { 1, 0, 0, 1, 0, 0, 1, 0 },  // EIGHT
    { 1, 0, 0, 1, 0, 0, 1, 0 },
    { 1, 0, 0, 1, 0, 0, 1, 0 },
    { 0, 1, 1, 0, 1, 1, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 } },

  { { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 1, 1, 1, 1, 1, 0, 0 },
    { 1, 0, 0, 1, 0, 0, 1, 0 },  // NINE
    { 1, 0, 0, 1, 0, 0, 1, 0 },
    { 1, 0, 0, 1, 0, 0, 1, 0 },
    { 0, 1, 1, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 } },

  { { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 1, 1, 1, 1, 0, 1, 1, 0 },  // END of list
    { 1, 1, 1, 1, 0, 1, 1, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 },
    { 0, 0, 0, 0, 0, 0, 0, 0 } }
};

void setupMatrix();
void _printNumber();
void _printDigit();
void _printCode();
